CREATE TABLE "drone" (
        "id"                            INT                      UNIQUE GENERATED BY DEFAULT AS IDENTITY
    ,   "name"                          TEXT                     NOT NULL
    ,   "brand"                         TEXT                     NOT NULL
    ,   "model"                         TEXT                     NOT NULL
    ,   "additional"                    TEXT
);

CREATE TABLE "user" (
        "id"                            INT                      UNIQUE GENERATED BY DEFAULT AS IDENTITY
    ,   "name"                          TEXT                     NOT NULL
    ,   "username"                      TEXT                     NOT NULL UNIQUE
);

CREATE TABLE "analytic" (
        "id"                            INT                      UNIQUE GENERATED BY DEFAULT AS IDENTITY
    ,   "name"                          TEXT                  
    ,   "description"                   TEXT           
    ,   "location"                      POINT                 
    ,   "timestamp"                     TIMESTAMP
);

CREATE TABLE "picture" (
        "id"                            INT                      UNIQUE GENERATED BY DEFAULT AS IDENTITY
);

CREATE TABLE "picture_analytic" (
        "picture"                       INT                      REFERENCES "picture" ("id") ON DELETE CASCADE
    ,   "analytic"                      INT                      REFERENCES "analytic" ("id") ON DELETE CASCADE

    ,   PRIMARY KEY ("picture", "analytic")
);

CREATE TABLE "drone_user" (
        "drone"                         INT                      REFERENCES "drone" ("id") ON DELETE CASCADE
    ,   "user"                          INT                      REFERENCES "user" ("id") ON DELETE CASCADE

    ,   PRIMARY KEY ("drone", "user")
);

CREATE TABLE "drone_picture" (
        "drone"                         INT                      REFERENCES "drone" ("id") ON DELETE CASCADE
    ,   "picture"                       INT                      REFERENCES "picture" ("id") ON DELETE CASCADE
    ,   "user"                          INT                      REFERENCES "user" ("id") ON DELETE CASCADE

    ,   PRIMARY KEY ("drone", "picture", "user")
);
